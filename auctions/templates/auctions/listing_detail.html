{% extends "auctions/layout.html" %}
{% block body %}
<h1>
    {{title}}: {{listing.title}}
</h1>
{% if messages %}

    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
            <div class="alert alert-danger" role="alert">
                {{ message }}
            </div>
        {% else %}
            <div class="alert alert-success" role="alert">
                {{ message }}
            </div>
        {% endif %}
    {% endfor %}
</ul>
{% endif %}


<ul>
    <li>{{ listing.title }}</li>
    <li>{{ listing.description}}</li>
    <li>
        <img src="{{ listing.image_url }}" 
             width="200px" 
             height="200px" 
             alt="{{ listing.title }}">
    </li>
    <li>{{ listing.category.name }}</li>
    <li>
        <h3>{{ listing.price }}</h3>
    </li>
    <li>
        <span>{{ bids }} bid(s) so far. Your bid is the current bid</span>
        <form action="{% url 'place_bid' listing.id %}" method="post">
            {% csrf_token %}
            <input type="number" name="bid_value">
            <button type="submit" class="btn btn-primary"> Place Bid </button>
        </form>
    </li>
    <li>
        <form action="{% url 'add_watch_list' listing.id %}" method="post">
            {% csrf_token %}
            {% if listing.watchlist  %}
                <button type="submit" class="btn btn-danger"> Unwatch</button>
            {% else %}
                <button type="submit" class="btn btn-primary"> Watchlist</button>
            {% endif%}
        </form>
    </li>
</ul>
{% endblock %}